# 责任链 (Chain of Responsibility)

![interview-process](https://tva1.sinaimg.cn/large/008i3skNgy1gv9eefwr92j60rq0fowg402.jpg)

对于各位"新时代农民工"而言，参加面试应该是家常便饭了吧？

当我们吧自己精心制作的简历投递到某家互联网公司的时候，HR小姐姐会认真查看我们的简历能否与我们投递的岗位的职责匹配，如果匹配，就会进入第一场电话面试，电话面试一般就问一些基本的问题，目的在于和候选人进行初步的接触并且进一步确认我们的求职意向。
电话面试通过之后，就进入到技能面试，主要考察候选人的基本技能是否达标，如果达标通过，就进入到文化面试，主要考察候选人的对工作的认知与公司文化是否匹配，这一关通过之后，就可以给offer了。上面的所有流程中，只要有任意的流程没有达到要求，就直接淘汰。

上面的面试流程其实和我们软件设计模式中的***责任链模式***很像，下面我们来简单了解一下这种模式。

## 模式定义

***责任链模式是一种行为设计模式， 允许你将请求沿着处理者链进行发送。收到请求后，每个处理者均可对请求进行处理，或将其传递给链上的下个处理者。***

所以，对于候选人的"请求"，面试中的各个环节可以认为是链条，每个节点依次对"候选人"进行"处理"，如果处理成功，则将其传递给链的下一个处理者。

通常来看，责任链可以使用与如下的几种场景中：
* **当程序需要使用不同方式处理不同种类请求，而且请求类型和顺序预先未知时，可以使用责任链模式。**
  
该模式能将多个处理者连接成一条链。 接收到请求后， 它会 “询问” 每个处理者是否能够对其进行处理。 这样所有处理者都有机会来处理请求。

* **当必须按顺序执行多个处理者时， 可以使用该模式。**

无论你以何种顺序将处理者连接成一条链， 所有请求都会严格按照顺序通过链上的处理者。

* **如果所需处理者及其顺序必须在运行时进行改变， 可以使用责任链模式。**

如果在处理者类中有对引用成员变量的设定方法， 你将能动态地插入和移除处理者， 或者改变其顺序。

## 模式的结构

![structure-chain-of-responsibility](https://tva1.sinaimg.cn/large/008i3skNgy1gv9hqyevihj60e807p0su02.jpg)

该模式主要包含如下几个角色：

* **处理者(Handler):** 它定义了一个处理请求的接口，一般设计为抽象类，由于不同的具体处理者处理请求的方式不同，因此在其中定义了抽象请求处理方法。因为每一个处理者的下家还是一个处理者，因此在抽象处理者中定义了一个抽象处理者类型的对象，作为其对下家的引用。通过该引用，处理者可以连成一条链。
* **具体处理者(Concrete Handlers):** 包含处理请求的实际代码。 每个处理者接收到请求后， 都必须决定是否进行处理，以及是否沿着链传递请求。
* **客户端(Client):** 可根据程序逻辑一次性或者动态地生成链。 值得注意的是， 请求可发送给链上的任意一个处理者，而非必须是第一个处理者。

## 模式的优缺点

### 优点
* 你可以控制请求处理的顺序。
* 单一职责原则：你可对发起操作和执行操作的类进行解耦。
* 开闭原则：你可以在不更改现有代码的情况下在程序中新增处理者。

### 缺点
* 部分请求可能未被处理。

