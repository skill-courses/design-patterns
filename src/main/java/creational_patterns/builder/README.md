# 建造者模式(Builder)

![computer-structure](https://tva1.sinaimg.cn/large/008i3skNgy1gy0uj7idmcj30pw0g0416.jpg)

个人电脑是20世纪人类最出色的发明之一啦，其制造过程非常复杂，包括CPU，内存，显示器，键盘等多个组件，每个组件都可能需要独立的制作过程。

想要制作像电脑这样复杂的实体，不仅要涉及到多个原件的生产，而且还需要各种制作工艺和流程，这在软件中属于一种非常特殊的设计模式：***建造者模式！***

## 模式定义

***建造者模式是一种创建型设计模式，使你能够分步骤创建复杂对象，将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。***

建造者模式通常使用如下的场景中：

1. 使用生成器模式可避免`重叠构造函数(telescopic constructor)` 的出现。 

假设你的构造函数中有十个可选参数， 那么调用该函数会非常不方便； 因此， 你需要重载这个构造函数， 新建几个只有较少参数的简化版。 但这些构造函数仍需调用主构造函数， 传递一些默认数值来替代省略掉的参数。

2. 当你希望使用代码创建不同形式的产品(例如石头或木头房屋)时，可使用生成器模式。

如果你需要创建的各种形式的产品， 它们的制造过程相似且仅有细节上的差异， 此时可使用生成器模式。

3. 使用生成器构造组合树或其他复杂对象。

生成器模式让你能分步骤构造产品。 你可以延迟执行某些步骤而不会影响最终产品。 你甚至可以递归调用这些步骤， 这在创建对象树时非常方便。

## 模式结构

![builder-structure](https://tva1.sinaimg.cn/large/008i3skNgy1gy0uu17nfmj30pk0w8whw.jpg)

该结构主要有以下角色构成：
* **生成器(Builder)**: 接口声明在所有类型生成器中通用的产品构造步骤。
* **具体生成器(Concrete Builders)**: 提供构造过程的不同实现。 具体生成器也可以构造不遵循通用接口的产品。
* **产品(Products)**: 是最终生成的对象。由不同生成器构造的产品无需属于同一类层次结构或接口。
* **主管(Director)**: 类定义调用构造步骤的顺序，这样你就可以创建和复用特定的产品配置。
* **客户端(Client)**: 必须将某个生成器对象与主管类关联。 一般情况下， 你只需通过主管类构造函数的参数进行一次性关联即可。 此后主管类就能使用生成器对象完成后续所有的构造任务。 但在客户端将生成器对象传递给主管类制造方法时还有另一种方式。 在这种情况下， 你在使用主管类生产产品时每次都可以使用不同的生成器。

## 优缺点

### 优点

1. 你可以分步创建对象， 暂缓创建步骤或递归运行创建步骤。
2. 生成不同形式的产品时， 你可以复用相同的制造代码。
3. 单一职责原则。 你可以将复杂构造代码从产品的业务逻辑中分离出来。

### 缺点

1. 由于该模式需要新增多个类， 因此代码整体复杂程度会有所增加。




