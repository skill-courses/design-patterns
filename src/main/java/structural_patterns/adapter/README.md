# 适配器模式

相信大家都看过NBA吧？没看过可能至少听过吧？我们知道作为全球顶级的篮球赛事，吸引了全世界顶级的篮球运动员，咱们国家的"姚明"作为2002年选秀的状元效力于NBA火箭队。

![yaoming](https://tva1.sinaimg.cn/large/008i3skNgy1gtg68m0zj3j60hj0c70u902.jpg)

新秀赛季的"姚明"遇到了不少的挑战，其中最主要的是语言障碍，这让姚明无法听懂教练的战术安排，进而无法有效的执行。

为了克服这个问题，可以让姚明快速学习英语，但是我们都清楚，让"姚明"快速学习英语在短时间内根本不可行，没有人能够在短时间内、一边应对繁忙的训练、繁忙的比赛中，还能一边快速的学习英语(虽然，事实证明，姚明在新秀赛季之后，基本上可以使用英语交流了，这里真心佩服姚明的学习能力)。另一种方案是就是，让主教练"范甘迪"快速的学习汉语，我们都知道，主教练的年龄都那么大了，能不能学会暂时不说，关键是即使你学会了，用汉语布置的战术其他球员能听懂么？除非单独给"姚明"布置战术，可惜每场比赛的暂停时间太少，没有时间单独布置战术。显然，这种方案更加不可行。

为了解决这个问题，我们可以找一个翻译，这个翻译能听懂教练的战术安排，同时能够将其翻译成汉语，传达给"姚明"执行，这样，教练依旧使用英语布置战术，不需要做任何调整，"姚明"只需要接受汉语的战术说明，努力执行就行，也不需要做太多的调整，同时，有了这个翻译，姚明可以和队友进行无限教练，简直两全其美。

![yaoming_translator](https://tva1.sinaimg.cn/large/008i3skNgy1gtg6f2pxflj60sk0d2tan02.jpg)

这个翻译，我们在软件设计模式中，称之为`适配器`, 这就是典型的`适配器模式`解决的问题, 下面我们就来了解一下这个模式。

## 模式定义

***适配器模式是一种结构设计模式，它能使接口不兼容的对象(类)能够相互合作。***

将一个类或对象的接口转换成客户希望的另外一个接口。Adapter模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。

对于姚明与教练来说，他们之间的接口就是语言，不同的语言使得这两个对象不能够一起工作，引入了翻译这个适配器，就能够让教练和姚明之间兼容。

所以，这个适配器一般有两个特点：

* 能够具有客户端(教练)的能力
* 能够将客户端的指令转换成目标对象(姚明)所需的数据格式

那么，具有这两个特点的适配器的设计模式具有如下的结构：

## 模式结构

![adapter-constructor](https://tva1.sinaimg.cn/large/008i3skNgy1gtg6q9pskaj60w80hs75i02.jpg)

此模式的结构中有以下几个角色：

* *客户端(Client):* 是包含当前程序业务逻辑的类.
* *客户端接口(Client Interface):* 描述了其他类与客户端代码合作时必须遵循的协议.
* *服务(Service):* 中有一些功能类 （通常来自第三方或遗留系统）。 客户端与其接口不兼容， 因此无法直接调用其功能。
* *适配器(Adapter):* 是一个可以同时与客户端和服务交互的类： 它在实现客户端接口的同时封装了服务对象。 适配器接受客户端通过适配器接口发起的调用， 并将其转换为适用于被封装服务对象的调用。

## 模式的使用场景

基于此模式的意图和结构，我们可以将此模式应用于以下两种场景中：

*  *当你希望使用某个类， 但是其接口与其他代码不兼容时， 可以使用适配器类*

适配器模式允许你创建一个中间层类， 其可作为代码与遗留类、 第三方类或提供怪异接口的类之间的转换器。

* * 如果您需要复用这样一些类， 他们处于同一个继承体系， 并且他们又有了额外的一些共同的方法， 但是这些共同的方法不是所有在这一继承体系中的子类所具有的共性。*

将缺失功能添加到一个适配器类中是一种优雅得多的解决方案。 然后你可以将缺少功能的对象封装在适配器中， 从而动态地获取所需功能。 如要这一点正常运作， 目标类必须要有通用接口， 适配器的成员变量应当遵循该通用接口。 这种方式同装饰模式非常相似

## 模式的优缺点

凡事总有利弊，适配器模式也不例外。

### 优点 
* 单一职责原则：你可以将接口或数据转换代码从程序主要业务逻辑中分离。
* 开闭原则： 只要客户端代码通过客户端接口与适配器进行交互， 你就能在不修改现有客户端代码的情况下在程序中添加新类型的适配器。

### 缺点：
* 代码整体复杂度增加： 因为你需要新增一系列接口和类。 有时直接更改服务类使其与其他代码兼容会更简单。




